<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Numeric Core Tools</title>
  </head>

  <body>
    <form id="basic_form">
      <input name="first" type="number" />
      <input name="second" type="number" />
      <input name="third" type="number" />
      <input name="fourth" type="number" />
    </form>
    <input type="submit" value="Calculate" />
    <div id="core_result"></div>
    <form id="word_core">
      <input name="word" type="text" />
    </form>
    <input type="submit" value="Calculate" />
    <div id="word_result"></div>
    <script>
      function numeric_core(values) {
        const v = values.map(Number);
        const possibilities = [
          ((v[0] - v[1]) * v[2]) / v[3],
          ((v[0] - v[1]) / v[2]) * v[3],
          (v[0] * v[1] - v[2]) / v[3],
          (v[0] * v[1]) / v[2] - v[3],
          (v[0] / v[1]) * v[2] - v[3],
          (v[0] / v[1] - v[2]) * v[3],
        ];
        const core = possibilities
          .filter(Number.isInteger)
          .filter((n) => n > 0)
          .sort((a, b) => b < a);
        return core;
      }
      // 4 letter word
      document
        .getElementById("word_core")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const data = new FormData(event.target);
          const dataObject = Object.fromEntries(data.entries());
          const letters = dataObject["word"].trim().split("");
          const letter_values = letter.map(
            (l) => l.toLowerCase().charCodeAt(0) - 97 + 1,
          );
          const coreValues = numeric_core(values.slice(0, 4));
          if (coreValues.length > 0) {
            document.getElementById("word_result").innerText = coreValues[0];
          } else {
            document.getElementById("word_result").innerText =
              "Could not find core";
          }
        });
      // Basic form
      document
        .getElementById("basic_form")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const data = new FormData(event.target);
          const dataObject = Object.fromEntries(data.entries());
          const values = [
            dataObject["first"],
            dataObject["second"],
            dataObject["third"],
            dataObject["fourth"],
          ];
          const coreValues = numeric_core(values);
          if (coreValues.length > 0) {
            document.getElementById("core_result").innerText = coreValues[0];
          } else {
            document.getElementById("core_result").innerText =
              "Could not find core";
          }
        });
    </script>
  </body>
</html>
